{% extends "home.html" %}
{% import "bootstrap/wtf.html" as wtf %}

{% block title %}
{{user.username}} profile
{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/profile.css') }}">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
{% endblock %}

{% block content %}
<section class="bg-warning font-monospace p-5 mb-5" style="">
	<a href="/movies" class="text-decoration-none text-muted">
	/home</a>
	<a href="/userporfile" class="text-decoration-none text-dark" style="margin-left:-10px">/{{user.username}}</a>
	<p class="fs-4">Profile</p>

<!-- flash message section  -->
    <div class="" style="z-index: 1000">  
    {% with messages = get_flashed_messages() %}
              {% if messages %}
              {% for message in messages %}
              <div class="alert alert-warning alert-dismissible fade show" role="alert">
              <p class="font-monospace fw-bold fs-5">{{ message }}</p>
              <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
              </div>
              {% endfor %}
              {% endif %}
          {% endwith %}
          </div>
  <!-- end flash message section -->

  <!-- staring user data field  -->
<div class="formfield fs-4">  
	<div class="userdata float-start me-2">
		<img src="{{ user.image_link }}" alt="user_image" class="" style="width:226px">
	</div>

	<div class="border-left form-control">
	<span class="fw-bolder">username:</span> {{ user.username }}
	</div>
	<hr>
	<div class="border-left form-control">
	<span class="fw-bolder">email:</span> {{ user.email }}
	</div>
	<hr>
	<div class="border-left form-control">
	<span class="fw-bolder">image link:</span> {{ user.image_link }}
	</div>
	<hr>
	<div class="border-left form-control bg-primary text-light">
	<span class="fw-bolder">admin:</span> {{ user.is_admin }}
	</div>
	<hr>
	<button class="btn btn-success"><i class="bi bi-clipboard-plus text-light	"></i> CHANGE PROFILE</button>
	<a href="/logout" class="btn btn-primary"><i class="bi bi-box-arrow-in-right text-light"></i> LOGOUT PROFILE</a>
	<button class="btn btn-danger"><i class="bi bi-trash text-light"></i> DELETE PROFILE</button>
</div>

<div class="change__section fs-4">

	<form class="container-form form" action="/userprofile" method="POST">
        <div class="font-monospace sign-header"><h2>Profile settings</h2></div>
        {{ form.hidden_tag() }}
        {{ wtf.form_field(form.username) }}
        {{ wtf.form_field(form.email) }}
        {{ wtf.form_field(form.image_link) }}
        {{ wtf.form_field(form.password) }}
        {{ wtf.form_field(form.password2) }}
        <button type="submit" class="btn btn-primary large-button mt-2" style="width:300px">Change</button>
    </form>
</div>
<!-- end of user data field(section) -->
</section>
{% endblock %}